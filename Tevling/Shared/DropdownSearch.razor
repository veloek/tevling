@typeparam T
@inject IStringLocalizer<DropdownSearch> Loc

<div class="dropdown">
    <label>
        @Loc["Search"]
        <input class="form-control search-input dropdown-toggle" type="text"
               @bind="@SearchTerm"
               @oninput="OnSearchInput"
               @onfocus="() => IsSearchFocused = true"
               @onblur="OnInputBlur" />
    </label>

    <div class="dropdown-menu" style="@(IsSearchFocused && FilteredItems.Any() ? "display: block;" : "display: none;")">
        @foreach (T? item in FilteredItems.Where(item => !SelectedItems.Contains(item)))
        {
            <button type="button" class="dropdown-item" @onclick="() => SelectItemAsync(item)">@(DisplayFunc?.Invoke(item) ?? item?.ToString())</button>
        }
    </div>
</div>
